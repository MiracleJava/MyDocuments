# Java线程

## 1.关于Java线程的基础知识

### 1.1 线程的概念

* 关于线程
  * `Daemon Thread` 守护线程
  * `Main Thread`
  * `GC Thread`
* 关于并发
  * 顺序`sequential`:表示多个操作一次处理;
  * 并行`parallel`:表示多个操作同时处理;
  * 并发`concurrent`:表示多个操作轮流执行;

### 1.2 线程的启动

* `extends Thread`
* `implements Runnable`
* `run()`

### 1.3 线程的暂停

* `sleep()`

### 1.4 线程之间的互斥处理

* `synchronized`:针对同一实例的所有同步方法(不同实例之间不互相影响)
  * 锁(监视)
  * 同步方法
  * 同步代码块
    * 实例:`this`
    * 静态:`ClassName.class`

### 1.5 线程之间的协作

#### 1.5.1 基本方法

* `等待队列`:实例的线程休息室;
* `wait()`:将当前线程放入实例的等待队列;
* `notify()`:从等待队列中随机取出一个线程;
* `notifyAll()`:从等待队列中取出所有线程

#### 1.5.2 特点

* 关于`wait`,`notify`,`notifyAll`
  * 线程需要持有锁才能执行;
  * 方法都是`Object`方法
* 关于`interrupt`
  * 是`Thread`方法

### 1.6 线程的状态迁移

* 线程的状态迁移图
  * 初始状态 `NEW`
  * 可执行/执行状态 `RUNNABLE`
  * 等待 `WAITING`,`TIMED_WAITING`
  * 阻塞 `BLOCKED`
  * 终止状态 `TERMINATED`



## 2.多线程程序评价标准

### 2.1 安全性(必须遵守的标准)

* 意思:不损坏实例对象;
* `损坏对象`:指对象的状态与设计与其不符;
* `线程安全`:即使一个类实例被多个线程同时使用,也可确保安全性;
* `线程兼容`:即使某些类不是线程安全的,但通过适当的互斥处理也可以安全使用,比如`ArrayList`;
* `线程安全与synchronized`方法:某个类是否线程安全,与这个类的方法是否是`synchronized`无关;

### 2.2 生存性(必须遵守的标准)

* 意思:指无论什么时候,必要的处理一定都能够被执行;
* `死锁dead lock`:多个线程互相等待对方释放锁的情形;

### 2.3 可复用性

* 将类作为组件从实际逻辑中剥离出来,例如`Java SE5`引入的`java.util.concurrent`包;

### 2.4 性能

* 意思:能快速,大批量执行处理;
* 性能指标:
  * 吞吐量 `throughput`
  * 响应性 `responsiveness`
  * 容量 `capacity`
  * 其他指标: 效率`efficiency`,可伸缩性 `scalability`,降级 `degradation`